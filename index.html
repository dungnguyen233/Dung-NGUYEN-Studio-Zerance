<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="style.css"> 
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet"  href="https://cdn.jsdelivr.net/npm/@splidejs/splide@2.4.21/dist/css/splide.min.css"/>
</head>
<title>Studio Zerance</title>
<body >
    <!-- section header -->
    <div class="nav">
        <a href="#" ><img  class="logo" src="img\logo.png" alt="logo"></a>
        <input type="checkbox" id="nav-check">
        <div class="nav-btn">
          <label for="nav-check">
            <span></span>
            <span></span>
            <span></span>
          </label>
        </div>        
        <div class="nav-links">
          <a href="#porfolio">Nos Clients</a>
          <a href="#slide">Notre Offre</a>
          <a href="#text_inf">Le Studio</a>
          <a href="" id="contact">Contact</a>          
        </div>
    </div>
    <!-- section contact form -->
    <div >
        <div class="cd-popup contact" role="alert">
            <form name="contactform" id="contactform" class="contact-form">
                <div class="cd-popup-container" >
                    <p >
                        <a href="" class="cd-popup-close cd-close-button">
                        <i class="fa fa-times" style="pointer-events:none;"></i>
                        </a>
                    </p>
                    <div class="name">
                        <label for="name">Prenom</label>
                        <input type="text" id="name" name="name" />
                    </div>
                    <div class="email">
                        <label for="email">Email</label>
                        <input type="text" id="email" name="email" />
                    </div>
                    <div class="message">
                        <label for="message">Message</label>
                        <textarea name="message" id="message" name="message"></textarea>
                    </div>
                    <br>
                    <br>
                    <div class="submit">
                        
                        <input type="submit" name="submit" id="submit" value="Valider" />
                    </div>
                </div>
            </form>
        </div>
        <div class="cd-popup notification" role="confirm">
            <div class="cd-popup-container">
            <a href="" class="cd-popup-close cd-close-button"><i class="fa fa-times" style="pointer-events:none;"></i></a>
            <p>
                <h3 id="notification-text"></h3>
            </p>
            </div>
        </div>
    </div>
    <!-- section banner -->
    <div>
        <div class="banner">
            <p>SINCE 2016</p>
            <h1 class="banner_h1">We create from scratch </br>amazing <strong><mark>Shopify</mark></strong></h1>
        </div>
    </div>
    <!-- section porfolio -->
    <div class="porfolio" id="porfolio">
        <p>NOS CLIENTS SONT GENIAUX ! </p> 
        <div class="container">        
            <div id="myData" class="row " ></div> 
        </div>
    </div>
    <!-- section slider -->
    <div class="splide" id="slide">
        <div class="splide__track">
            <ul class="splide__list">
                <li class="splide__slide">
                    <div class="splide__slide__container">
                        <div class="slide__content">
                            <img src="../Artboard_2.jpg"  alt="">                 
                        </div>
                        <div class="text">
                            <p>FROM SCRATCH /</p>
                            <h3>seasonly</h3>
                            <p class="description">Développement site from scratch et d'un quiz personnalisé avec abonnement. Développement site from scratch et d'un quiz personnalisé avec abonnement.</p>
                            <button><mark>Voir plus</mark></button>
                        </div>
                    </div>    
                </li>
                <li class="splide__slide">
                    <div class="splide__slide__container">
                        <div class="slide__content">
                            <img src="../Artboard_1.jpg" alt="">                    
                        </div>
                    </div>    
                </li>
            </ul>
        </div>
    <div>
    <!-- section text infinitive -->
    <div id="text_inf" class="outer-container">
        <div class="inner-container">
            <h1>  
                <a href="https://www.graou.co">graou.co</a>Nous étions 4 en 2018, nous sommes 14 en 2020 ! / Studio Zerance, Experts Shopify de père en fils depuis 2016 / Nous sommes également des e-commerçants ! Découvrez nos croquettes sur-mesure sur  / En langue bretonne, Studio Zerance se dit Studio Zerance / C'est plus agréable en vrai, venez donc discuter de votre projet autour d'un thé dans nos supers bureaux du Sentier / Pour votre sécurité, veuillez conserver une distance de sécurité d'1,5 mètre avec nos développeurs, merci /</span>
            </h1>
        </div>
    </div>
    <!-- section function js -->
    <script>
        // ici je recupe les data from API, ils sont l'afficher sur la section porfolio
        // les datas sont lien de logo de clients et l'adress de website de client
        fetch("https://62eebbd88d7bc7c2eb71c2fd.mockapi.io/clients")
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                appendData(data);
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });        
        // Afficher data sur porfolio
        function appendData(data) {
            var mainContainer = document.getElementById("myData");
            for (var i = 0; i < data.length; i++) {
                const Img = document.createElement("img");
                const a = document.createElement("a")
                Img.src = data[i].img_logo;
                a.href = data[i].adress;
                a.className = "col-md-2 col-half-offset col-xs-3";
                Img.className ="logo_clients";
                a.appendChild(Img);
                mainContainer.appendChild(a);
            }
        }

        // Library Splider.js pour la section Slider
        document.addEventListener("DOMContentLoaded", function () {
            new Splide(".splide", {
            type : 'loop',
            autoWidth: true,
            }).mount();
        });
        // contact form
        function validateEmail(email) {
            var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        }
        function closeForm() {
            document.contactform.name.value = '';
            document.contactform.email.value = '';
            document.contactform.message.value = '';

            $('.email').removeClass('typing');
            $('.name').removeClass('typing');
            $('.message').removeClass('typing');

            $('.cd-popup').removeClass('is-visible');
            $('.notification').addClass('is-visible');
        }
        $(document).ready(function($) {
        $('#contact').on('click', function(event) {
            event.preventDefault();
            $('.contact').addClass('is-visible');

            if ($('#name').val().length != 0) {
            $('.name').addClass('typing');
            }
            if ($('#email').val().length != 0) {
            $('.email').addClass('typing');
            }
            if ($('#message').val().length != 0) {
            $('.message').addClass('typing');
            }
        });
        //fermer popup quand cliquer sur x ou dehors popup
        $('.cd-popup').on('click', function(event) {
            if ($(event.target).is('.cd-popup-close') || $(event.target).is('.cd-popup')) {
            event.preventDefault();
            $(this).removeClass('is-visible');
            }
        });
        //fermer popup quand tapper ESC
        $(document).keyup(function(event) {
            if (event.which == '27') {
            $('.cd-popup').removeClass('is-visible');
            }
        });
        $('#name').keyup(function() {
            $('.name').addClass('typing');
            if ($(this).val().length == 0) {
            $('.name').removeClass('typing');
            }
        });
        $('#email').keyup(function() {
            $('.email').addClass('typing');
            if ($(this).val().length == 0) {
            $('.email').removeClass('typing');
            }
        });
        $('#message').keyup(function() {
            $('.message').addClass('typing');
            if ($(this).val().length == 0) {
            $('.message').removeClass('typing');
            }
        });
        $('#contactform').submit(function() {
            var name = $('#name').val();
            var email = $('#email').val();
            var message = $('#message').val();
            if (validateEmail(email)) {
                if (name) {
                if (message) {
                    // console.log(name);
                    // envoyer un request par lien api a API Gender
                    fetch('https://gender-api.com/get?name='+name+'&key=SAVmbYwyvKKyyJofybRsKVdGfLHgTDlW9p99')
                    .then(data => {
                    return data.json();
                    })
                    .then(info => {
                    console.log(info.gender);
                    if(info.gender == "female"){
                        $('#notification-text').html("We rob banks")  
                    }
                    if(info.gender == "male"){
                        $('#notification-text').html("Rosebud")  
                    }
                    if (info.gender == "unknown"){
                        $('#notification-text').html("It’s a trap !")
                    }
                    });
                    // console.log(info.gender);
                    closeForm();
                } else {
                    $('#notification-text').html("<strong>Please let us know what you're thinking!</strong>");
                    $('.notification').addClass('is-visible');
                }
                } else {
                $('#notification-text').html('<strong>Please provide a name.</strong>');
                $('.notification').addClass('is-visible');
                }
            } else {
                $('#notification-text').html('<strong>Please use a valid email address.</strong>');
                $('.notification').addClass('is-visible');
            }
            return false;
        });
        });
    </script> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@2.4.21/dist/js/splide.min.js"></script>
</body>
</html>